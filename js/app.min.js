var canvasWidth=505,numCol=5,blockWidth=canvasWidth/numCol,halfCanvasWidth=canvasWidth/2-blockWidth/2,spriteWidth=101,halfSprite=spriteWidth/2;function generateRandomNumber(a,b){return Math.random()*(b-a)+a}function generateXCoordinateOnOrOffCanvas(){return 101*Math.round(generateRandomNumber(0,25))}function generateXCoordinateOnCanvas(){return 101*Math.round(generateRandomNumber(0,4))}function generateYCoordinate(){return 75*Math.round(generateRandomNumber(1,3))}
function hideObjects(){heart.x=-101;heart.y=-101;star.x=-101;star.y=-101;gemOrange.x=-101;gemOrange.y=-101;gemGreen.x=-101;gemGreen.y=-101;gemBlue.x=-101;gemBlue.y=-101;key.x=-101;key.y=-101}Object.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Enemy=function(a,b){this.sprite="images/enemy-bug.png";this.x=a;this.y=b};
Enemy.prototype.update=function(a){this.x+=100*a;if(10<=player.score&&20>player.score)this.x+=150*a;else if(20<=player.score&&30>player.score)this.x+=200*a;else if(30<=player.score&&40>player.score)this.x+=250*a;else if(40<=player.score&&50>player.score)this.x+=300*a;else if(50<=player.score&&60>player.score)this.x+=350*a;else if(60<=player.score&&70>player.score)this.x+=400*a;else if(70<=player.score&&80>player.score)this.x+=450*a;else if(80<=player.score&&90>player.score)this.x+=500*a;else if(90<=
player.score&&100>player.score)this.x+=550*a;else if(100<=player.score||0===player.health)this.x=-101,hideObjects();this.x>canvasWidth&&(this.x=0,this.y=generateYCoordinate())};
var Player=function(){this.sprite="images/grass-block.png";this.x=halfCanvasWidth;this.score=0;this.level=1;this.health=100;this.successMessages=["Booyah!","Woohoo!","Yeehaw!","Bam!"];this.checkCollision=function(a,b){if(b>a-halfSprite&&b<a+halfSprite)return!0};this.resetPlayerCoordinates=function(){this.x=halfCanvasWidth;this.y=375};this.increaseLevel=function(){this.level++;$("h1").text("Level: "+this.level).removeClass("collision-message").addClass("success-message");this.resetPlayerCoordinates();
heart.x=generateXCoordinateOnOrOffCanvas();heart.y=generateYCoordinate();star.x=generateXCoordinateOnOrOffCanvas();star.y=generateYCoordinate();gemOrange.x=generateXCoordinateOnOrOffCanvas();gemOrange.y=generateYCoordinate();gemBlue.x=generateXCoordinateOnOrOffCanvas();gemBlue.y=generateYCoordinate();gemGreen.x=generateXCoordinateOnOrOffCanvas();gemGreen.y=generateYCoordinate();key.x=generateXCoordinateOnOrOffCanvas();key.y=generateYCoordinate()};this.increaseScore=function(){this.score++;0!==this.score%
10?$("h1").text(this.successMessages[this.randomSuccessMessage]+" Score: "+this.score+"/100").removeClass("collision-message").addClass("success-message"):this.increaseLevel()}};
Player.prototype.update=function(){if(this.checkCollision(this.x,allEnemies[0].x)&&allEnemies[0].y===this.y||this.checkCollision(this.x,allEnemies[1].x)&&allEnemies[1].y===this.y||this.checkCollision(this.x,allEnemies[2].x)&&allEnemies[2].y===this.y)this.health-=10,0<this.health?$("h1").text("Ouch! Health: "+this.health).removeClass("success-message").addClass("collision-message"):$("h1").text("Game Over").removeClass("success-message").addClass("collision-message"),this.resetPlayerCoordinates();
this.x===heart.x&&this.y===heart.y&&(this.health+=50,$("h1").text("Refreshing! Health: "+this.health).removeClass("collision-message").addClass("success-message"));this.x===star.x&&this.y===star.y&&(this.score+=10,this.increaseLevel());if(this.x===gemOrange.x&&this.y===gemOrange.y||this.x===gemBlue.x&&this.y===gemBlue.y||this.x===gemGreen.x&&this.y===gemGreen.y)this.increaseScore(),$("h1").text("Cha-ching! Score: "+this.score+"/100").removeClass("collision-message").addClass("success-message");0===
this.y&&(this.randomSuccessMessage=Math.floor(4*Math.random()),this.increaseScore(),this.resetPlayerCoordinates(),hideObjects(),gemOrange.x=generateXCoordinateOnOrOffCanvas(),gemOrange.y=generateYCoordinate(),gemGreen.x=generateXCoordinateOnOrOffCanvas(),gemGreen.y=generateYCoordinate(),gemBlue.x=generateXCoordinateOnOrOffCanvas(),gemBlue.y=generateYCoordinate());100===this.score&&$("h1").text("Player Triumphs!").removeClass("collision-message, success-message").addClass("win-message")};
Player.prototype.handleInput=function(a){switch(a){case "left":0<this.x&&(this.x-=blockWidth);break;case "up":this.y-=75;break;case "right":404>this.x&&(this.x+=blockWidth);break;case "down":375>this.y&&(this.y+=75)}};var Heart=function(){this.sprite="images/Heart.png";this.x=generateXCoordinateOnOrOffCanvas();this.y=generateYCoordinate()};
Heart.prototype.update=function(){this.x===player.x&&this.y===player.y&&(this.y=this.x=-101);key.x===player.x&&key.y===player.y&&(this.x=generateXCoordinateOnCanvas(),this.y=generateYCoordinate())};var Star=function(){this.sprite="images/Star.png";this.x=generateXCoordinateOnOrOffCanvas();this.y=generateYCoordinate()};
Star.prototype.update=function(){this.x===player.x&&this.y===player.y&&(this.y=this.x=-101,hideObjects());key.x===player.x&&key.y===player.y&&(this.x=generateXCoordinateOnCanvas(),this.y=generateYCoordinate())};var Gem=function(){this.x=generateXCoordinateOnOrOffCanvas();this.y=generateYCoordinate()};Gem.prototype.update=function(){this.x===player.x&&this.y===player.y&&(this.y=this.x=-101);key.x===player.x&&key.y===player.y&&(this.x=generateXCoordinateOnCanvas(),this.y=generateYCoordinate())};
var Key=function(){this.sprite="images/Key.png";this.x=generateXCoordinateOnOrOffCanvas();this.y=generateYCoordinate()};Key.prototype.update=function(){this.x===player.x&&this.y===player.y&&(this.y=this.x=-101,$("h1").text("Jackpot!").removeClass("collision-message").addClass("success-message"))};var allEnemies=[];
allEnemies.push(new Enemy(generateRandomNumber(0,canvasWidth),generateYCoordinate()),new Enemy(generateRandomNumber(0,canvasWidth),generateYCoordinate()),new Enemy(generateRandomNumber(0,canvasWidth),generateYCoordinate()));var player=new Player,heart=new Heart,star=new Star,gemOrange=new Gem;gemOrange.sprite="images/Gem Orange.png";var gemGreen=new Gem;gemGreen.sprite="images/Gem Green.png";var gemBlue=new Gem;gemBlue.sprite="images/Gem Blue.png";var key=new Key;
document.addEventListener("keyup",function(a){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[a.keyCode])});